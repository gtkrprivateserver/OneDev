<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ONEDEV - Monitor Bot Dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="monitor.css"> <!-- style khusus monitor -->
</head>
<body>
  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <h2 class="logo">ONE<span>DEV</span></h2>
    <nav>
      <a href="index.html">üè† Home</a>
      <a href="about.html">üí° About</a>
      <a href="services.html">‚öôÔ∏è Services</a>
      <a href="monitor.html" class="active">‚è≥ Monitor</a>
      <a href="contact.html">üì© Contact</a>
    </nav>
    <footer>¬© 2025 ONEDEV</footer>
  </aside>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <header>
      <div class="header-left">
        <button class="menu-btn" id="menuBtn">‚ò∞</button>
        <h1>Monitor Bot Dashboard</h1>
      </div>
    </header>

    <section class="monitor-section">
      <h2>Realtime Status Discord Bot üöÄ</h2>
      <p>
        Status bot realtime: 
        <span class="status-online">Online ‚úÖ</span> | 
        <span class="status-offline">Offline ‚ùå</span> | 
        <span class="status-disconnected">Disconnected ‚ö†Ô∏è</span>
      </p>

      <div class="monitor-grid" id="monitorGrid"></div>
    </section>
  </div>

  <script>
    // Toggle sidebar
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    menuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('active');
    });

    // Daftar bot contoh
    const bots = [
      { name: "Main Bot", id: "BOT_1" },
      { name: "Helper Bot", id: "BOT_2" },
      { name: "Music Bot", id: "BOT_3" },
      { name: "Fun Bot", id: "BOT_4" },
      { name: "Moderation Bot", id: "BOT_5" }
    ];

    const monitorGrid = document.getElementById("monitorGrid");

    function createCard(bot) {
      const div = document.createElement("div");
      div.classList.add("monitor-card", "disconnected");
      div.innerHTML = `
        <h3>${bot.name}</h3>
        <p>Status: <span>Disconnected ‚ö†Ô∏è</span></p>
      `;
      return div;
    }

    bots.forEach(bot => monitorGrid.appendChild(createCard(bot)));

    // Update status realtime
    async function updateBotStatus() {
      try {
        const res = await fetch("/bot-status");
        const data = await res.json();

        const cards = document.querySelectorAll(".monitor-card");
        cards.forEach((card, i) => {
          const botData = data[i];
          card.classList.remove("online","offline","disconnected");

          if(!botData) {
            card.classList.add("disconnected");
            card.querySelector("p span").innerText = "Disconnected ‚ö†Ô∏è";
          } else if(botData.status === "online") {
            card.classList.add("online");
            card.querySelector("p span").innerText = "Online ‚úÖ";
          } else {
            card.classList.add("offline");
            card.querySelector("p span").innerText = "Offline ‚ùå";
          }
        });
      } catch (err) {
        const cards = document.querySelectorAll(".monitor-card");
        cards.forEach(card => {
          card.classList.remove("online","offline");
          card.classList.add("disconnected");
          card.querySelector("p span").innerText = "Disconnected ‚ö†Ô∏è";
        });
      }
    }

    updateBotStatus();
    setInterval(updateBotStatus, 10000);
  </script>
</body>
</html>